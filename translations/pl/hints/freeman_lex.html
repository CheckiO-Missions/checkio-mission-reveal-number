<body data-author="freeman_lex">
<div class="question-answer">
    <div class="question">
        Nie mam pojęcia, jak zacząć rozwiązywać tę misję.
    </div>
    <div class="answer">
        <p>
            Proszę złapać jakiś pomysł 💡! Aby iterować po podanym ciągu i w zależności od znaku (znak, kropka lub cyfra) modyfikować wynikowy ciąg.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Ok, od czego powinienem zacząć?
    </div>
    <div class="answer">
        <p>
            Musi Pan zadeklarować zmienne dla wyników string <b class="code">res</b>, number sing <b class="code">sign</b> i dot <b class="code">dot</b> z następującymi wartościami początkowymi empty lines i logic <b class="code">False</b>:
        </p>
        <pre class="brush: python">
res = sign = ""
dot = False
        </pre>
        <p>
            Ponieważ ciąg znaków może być interpretowany jako sekwencja w Pythonie, można iterować po podanym <b class="code">line</b> za pomocą pętli <a target="_blank" href="https://www.w3schools.com/python/python_for_loops.asp">for</a>.
        </p>
        <pre class="brush: python">
for char in line:
    ...
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Co zrobić z każdym znakiem wewnątrz pętli?
    </div>
    <div class="answer">
        <p>
            Interesują nas trzy przypadki: <b class="code">char</b> jest znakiem numerycznym (+-), kropką (.) i cyfrą (0-9). Proszę użyć instrukcji <a target="_blank" href="https://www.w3schools.com/python/gloss_python_elif.asp">if/elif</a>, aby obsłużyć te przypadki. 
        </p>
        <p>
            Proszę opisać pierwszy przypadek. Potrzebny jest znak w <b class="code">"+-"</b>, a wynikowy ciąg <b class="code">res</b> musi być pusty, ponieważ uwzględnia się znaki tylko przed pojawieniem się pierwszej cyfry i dodaniem jej do wynikowego ciągu. Tak to wygląda:
        </p>
        <pre class="brush: python">
if char in "+-" and not res:
    ...
        </pre>
        <p>
            W tym przypadku wystarczy zaktualizować wartość zmiennej <b class="code">sign</b> o "-", jeśli znak to "-". Jeśli znakiem jest "+", można pozostawić <b class="code">sign</b> puste, ponieważ liczby dodatnie nie potrzebują wcześniej znaku plus. Można to zapisać w następujący sposób.
        </p>
        <pre class="brush: python">
if char in "+-" and not res:
    sign = "-"*(char == "-")
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Jak opisać drugi przypadek?
    </div>
    <div class="answer">
        <p>
            Zgodnie z opisem, biorą Państwo pod uwagę tylko pierwszą kropkę. Jeśli więc Państwa <b class="code">dot</b> jest równe <b class="code">False</b>, a bieżącym znakiem jest kropka, mogą Państwo napisać następujący przypadek:
        </p>
        <pre class="brush: python">
elif char == "." and not dot:
    ...
        </pre>
        <p>
            W tym przypadku musi Pan zaktualizować wartość <b class="code">dot</b> do <b class="code">True</b> (nie potrzebuje Pan więcej kropek w wynikowym ciągu) i dodać tę kropkę do wynikowego ciągu. 
        </p>
        <pre class="brush: python">
elif char == "." and not dot:
    dot = True
    res += "."
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Co zrobić z innymi znakami?
    </div>
    <div class="answer">
        <p>
            W przeciwnym razie proszę sprawdzić, czy znak jest cyfrą za pomocą metody <a target="_blank" href="https://www.w3schools.com/python/ref_string_isdigit.asp">str.isdigit()</a>. Jeśli tak - proszę dodać znak do wynikowego ciągu.
        </p>
        <pre class="brush: python">
elif char.isdigit():
    res += char
        </pre>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Jak przekonwertować wynikowy ciąg na odpowiednią liczbę?
    </div>
    <div class="answer">
        <p>
            Proszę zauważyć, że konwersja jest potrzebna tylko wtedy, gdy wynikowy ciąg nie jest pusty. W przeciwnym razie funkcja zwraca <b class="code">None</b> (czego potrzebujemy w przypadku, gdy liczba nie występuje w podanym ciągu).
        </p>
        <pre class="brush: python">
if res:
    ...
        </pre>
        <p>
            Potrzebna liczba składa się ze znaku i wynikowego ciągu znaków.
        </p>
        <pre class="brush: python">
...(sign + res)
        </pre>
        <p>
            Teraz jest trudny moment, więc proszę być uważnym. Jeśli kropka znajduje się w <b class="code">res</b> (<b class="code">dot</b> równa się <b class="code">True</b>), należy przekonwertować tę liczbę na float za pomocą wbudowanej funkcji <a target="_blank" href="https://www.w3schools.com/python/ref_func_float.asp">float()</a>. W przeciwnym razie (bez kropki) - proszę przekonwertować na liczbę całkowitą za pomocą wbudowanej funkcji <a target="_blank" href="https://www.w3schools.com/python/ref_func_int.asp">int()</a>. 
        </p>
        <p>
            Ponieważ wartości logiczne mogą być interpretowane jako liczby całkowite (0 dla <b class="code">False</b>, 1 dla <b class="code">True</b>), można użyć wartości <b class="code">dot</b> jako indeksu krotki z dwiema funkcjami i połączyć z powyższym wyrażeniem w nawiasie jako argumentem.
        </p>
        <pre class="brush: python">
return (int, float)[dot](sign + res)
        </pre>
        <p>
            Proszę zauważyć, że odnosi się Pan do funkcji wewnątrz pierwszego nawiasu, a nie je wywołuje, więc nie ma nawiasów obok każdej funkcji.
        </p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Jak więc powinno wyglądać moje ostateczne rozwiązanie?
    </div>
    <div class="answer">
        <p>
            Wystarczy połączyć wszystkie poprzednie podpowiedzi i zawinąć kod w wyrażenie funkcyjne. Używanie podpowiedzi typu dla danych wejściowych i wyjściowych jest wysoce zalecane.
        </p>
        <p>Poniżej znajduje się całe rozwiązanie:</p>
        <div class="spoiler">
        <pre class="brush: python">
def reveal_num(line: str) -> int | float | None:

    res = sign = ""
    dot = False
    for char in line:
        if char in "+-" and not res:
            sign = "-"*(char == "-")
        elif char == "." and not dot:
            dot = True
            res += "."
        elif char.isdigit():
            res += char
    if res:
        return (int, float)[dot](sign + res)
        </pre>
        </div>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Proszę pokazać mi więcej rozwiązań!<br />
        bo chcę być prawdziwą 🥇 Python Ninnjaa!
    </div>
    <div class="answer">
        <p>Jasne, proszę łapać!</p>
        <p>
            Za pomocą modułu wyrażeń regularnych znalazłem ostatni znak przed pierwszą cyfrą, podzieliłem podany ciąg między kropki i zbudowałem końcowe wyrażenie.
        </p>
        <div class="spoiler">
        <pre class="brush: python">
from re import sub


def reveal_num(line: str) -> int | float | None:

    sign = sub(r'\D*(\+|-).*', r'\1', '+' + line)
    p1, *p2 = sub(r'[^0-9.]', r'', line).split('.')

    return eval(f'{sign}{p1}.{"".join(p2)}') if p1 or p2 else None
        </pre>
        </div>
        <p>Proszę kliknąć <b>Best Solutions</b> w menu misji i zobaczyć wiele innych ciekawych rozwiązań!</p>
    </div>
</div>
<div class="question-answer">
    <div class="question">
        Dzięki! Teraz wiem i rozumiem więcej! Wszystko działa jak należy!
    </div>
    <div class="answer">
        Miło mi to słyszeć 👍!
    </div>
</div>
</body>